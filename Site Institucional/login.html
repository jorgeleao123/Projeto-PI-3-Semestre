<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GO | Login</title>
  <link rel="icon" type="image/png" sizes="32x32" href="img/icons/Logo GO.svg">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Chivo:wght@300;400;700;900&family=Mukta:wght@200;400;600;800&display=swap"
    rel="stylesheet">
  <link rel="stylesheet" href="./css/style-form.css">
  <link rel="stylesheet" href="https://cdn.linearicons.com/free/1.0.0/icon-font.min.css">
</head>

<body>
  <div class="nav">

    <input type="checkbox" id="nav-check">

    <div class="nav-header">
      <img src="./img/icons/Logo GO - black.png" alt="">
    </div>

    <div class="nav-btn">
      <label for="nav-check">
        <span></span>
        <span></span>
        <span></span>
      </label>
    </div>

    <div class="nav-links margin-nav">
      <a href="#sobre" target="_blank"></a>
      <a href="#servico" target="_blank"></a>
      <a href="#contato"></a>
      <a class="btns-resp" href="./cadastro.html" target="_blank">Cadastro</a>
    </div>

    <div class="btns-nav">
      <a class="button btn-blue-1" href="./cadastro.html">Cadastro</a>
    </div>

  </div>

  <main>
    <div class="container-pages">
      <div id="" class="container">
        <section class="container-form row">
          <div class="item item-form">
            <div class="content-form-img">
              <div class="backgroud-img">
                <div class="fundo">
                  <img src="./img/pics/ghen-mar-cuano-R6dSBkz32B8-unsplash-removebg-preview 1.svg" alt="">
                </div>
              </div>
            </div>
          </div>
          <div class="item teste">
            <div>
              <h2>Faça Login</h2>
              <h4>Acesse a nossa plataforma e tenha acesso a denuncias e noticias sobre aplicativos de transporte
                urbano.</h4>
              <form action="">
                <div class="ipt-form">
                  <label for="Login">Login</label>
                  <input type="text" name="login" id="login" placeholder="Insira seu login">
                </div>
                <div class="ipt-form">
                  <label for="Senha">Senha</label>
                  <div>
                    <input type="password" id="senha" placeholder="Insira sua senha">
                    <img id="olho" src="./img/icons/eye.png" />
                  </div>
                  <div class="pass-ask">
                    <span>Esqueceu sua senha?</span>
                  </div>
                  <div class="check">
                    <input style="width: 20px;" type="checkbox" name="" id="">
                    <span>Lembrar de mim</span>
                  </div>
                </div>
                <input onclick="logar()" class="button-login button" value="Entrar">
              </form>
            </div>
        </section>
      </div>
    </div>
  </main>
  <footer>
    <hr>
    <span>© GO - Todos os diretos reservados</span>
  </footer>
</body>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.0.2/jquery.min.js"></script>
<script>
  var senha = $('#senha');
  var olho = $("#olho");

  olho.mousedown(function () {
    senha.attr("type", "text");
  });

  olho.mouseup(function () {
    senha.attr("type", "password");
  });
  // para evitar o problema de arrastar a imagem e a senha continuar exposta, 
  //citada pelo nosso amigo nos comentários
  $("#olho").mouseout(function () {
    $("#senha").attr("type", "password");
  });

  //Função login
  function logar() {
    // const data = {
    //   loginUsuario: document.getElementById('login').value,
    //   senhaUsuario: document.getElementById('senha').value
    // };

    fetch(`http://localhost:8080/usuarios2/login/${document.getElementById('login').value}/${document.getElementById('senha').value}`, {
      method: 'POST', // or 'PUT'
      headers: {
        'Content-Type': 'application/json',
      },
      // body: JSON.stringify(data),
    })
      .then(Response => {
        console.log('Success:', Response);
        if (Response.status == 200) {
          alert("Usuario logado com sucesso")
        } else {
          alert("Login e/ou senha inválidos")
        }

      })
      .catch((error) => {
        console.error('Error:', error);
      });

  }
</script>

</html>