<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./css/teste.css">
</head>
<body>
    <div class="progress-form">
        <div class="progress-header">
            <div class="header_title active">
                <div class="title">Section 1</div>
                <div class="circle_container">
                    <div class="left-line-hidden"></div>
                    <div class="circle"></div>
                    <div class="right-line "></div>
                </div>
            </div>
            <div class="header_title">
                <div class="title">Section 2</div>
                <div class="circle_container">
                    <div class="left-line"></div>
                    <div class="circle"></div>
                    <div class="right-line"></div>
                </div>
            </div>
            <div class="header_title">
                <div class="title">Section 3</div>
                <div class="circle_container">
                    <div class="left-line"></div>
                    <div class="circle"></div>
                    <div class="right-line"></div>
                </div>
            </div>
            <div class="header_title">
                <div class="title">Section 4</div>
                <div class="circle_container">
                    <div class="left-line"></div>
                    <div class="circle"></div>
                    <div class="right-line-hidden"></div>
                </div>
            </div>
        </div>
        <div class="progress-content">
            
            <div class="progress_item" id="0">
                <h3>Hello 1</h3>
            </div>
            <div class="progress_item hide" id="1">
                <h3>Hello 2</h3>
            </div>
            <div class="progress_item hide" id="2">
                <h3>Hello 3</h3>
            </div>
            <div class="progress_item hide" id="3">
                <h3>Hello 4</h3>
            </div>
        </div>
        <div class="progress-footer">
            <button class="btn btn-previous" onclick="previousSection()" disabled id="previous_btn">Previous</button>
            <button class="btn btn-next" onclick="nextSection()" id="next_finish_btn">Next</button>
        </div>
    </div>

</body>
<script>
 function nextSection() {
    
    if(document.getElementById('previous_btn').disabled )
    document.getElementById('previous_btn').disabled = false;
    
    var header_titles = document.getElementsByClassName('header_title');
    var active_position = -1;
    for (var i = 0; i < header_titles.length; i++) {
        if (header_titles[i].className.indexOf('active') != -1) {
            active_position = i;
        }
    }

    for (var i = 0; i <= active_position + 1 && active_position + 1 < header_titles.length; i++) {
        addClass(header_titles[i], 'active');

        if (i == 0) {
            addClass(header_titles[i].children[1].children[2], 'active-line');
            addClass(header_titles[i + 1].children[1].children[0], 'active-line')
        } else {
            addClass(header_titles[i - 1].children[1].children[2], 'active-line')
            addClass(header_titles[i].children[1].children[0], 'active-line')
        }
    }
    



    // Content items.
    var content_divs = document.getElementsByClassName('progress_item');
    var active_div = -1;
    for (var i = 0; i < content_divs.length; i++) {
        if (content_divs[i].className.indexOf('hide') == -1) {
            active_div = i;
        }
    }

    if (active_div + 1 < content_divs.length) {
        addClass(content_divs[active_div], 'hide');
        removeClass(content_divs[active_div + 1], 'hide');
    }
    active_div++;
    
    
    if(active_div == content_divs.length - 1){
        var btn = document.getElementById('next_finish_btn');
        btn.innerHTML = 'Finish';
        btn.setAttribute('onclick','finishSections()');

    }


}

function previousSection() {
    
    
    var btn = document.getElementById('next_finish_btn');
    if(btn.innerHTML == 'Finish'){
                btn.innerHTML = 'Next';
        btn.setAttribute('onclick','nextSection()');
        
    }
    

    var header_titles = document.getElementsByClassName('header_title');

    var active_position = -1;
    for (var i = 0; i < header_titles.length; i++) {
        if (header_titles[i].className.indexOf('active') != -1) {
            active_position = i;
        }
    }

    if (active_position > 0) {
        removeClass(header_titles[active_position], 'active');
        removeClass(header_titles[active_position].children[1].children[0], 'active-line');
        removeClass(header_titles[active_position - 1].children[1].children[2], 'active-line');
    }



    // Content items.
    var content_divs = document.getElementsByClassName('progress_item');
    var active_div = -1;
    for (var i = 0; i < content_divs.length; i++) {
        if (content_divs[i].className.indexOf('hide') == -1) {
            active_div = i;
        }
    }

    if (active_div > 0 ){
        addClass(content_divs[active_div], 'hide');
        removeClass(content_divs[active_div - 1], 'hide');
    }
    
    active_div--;
    
    if(active_div == 0){
        document.getElementById('previous_btn').disabled = true;
    }
    
    


}

function addClass(element, value) {
    if (element.className.indexOf(value) == -1) {
        element.className += ' ' + value;
    }
}

function removeClass(element, value) {
    if (element.className.indexOf(value) != -1) element.className = element.className.replace(new RegExp(value, 'g'), '');
}


function finishSections(){

    alert('Do finish action');

}

</script>
</html>
