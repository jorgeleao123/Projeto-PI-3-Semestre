<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="assets/img/logo-go-blue.svg" type="image/png">
    <script src="https://kit.fontawesome.com/c9f71e3f63.js" crossorigin="anonymous"></script>
    <title>Feed | GO</title>

    <link rel="stylesheet" href="./assets/css/style.modais.css">
    <link rel="stylesheet" href="./assets/css/style.nav.css">
    <link rel="stylesheet" href="./assets/css/feed.css">
    <link rel="stylesheet" href="./assets/css/style-components.css">
</head>

<body onload="loadComplaints()">
    <!------------------------------------------------------------------------- NAVBAR ------------------------------------------------------------------------->
    <!-- navbar desktop -->
    <section class="nav__desktop">
        <div class="nav__desktop__top">
            <div class="nav__desktop__top__items">
                <span id="logo">
                    <img src=".//assets/img/logo-go-carbon.svg" alt="">
                </span>
                <span class="nav__desktop__search">
                    <input type="search" id="uriParamComplaint" placeholder="Busque pela placa ou nome do motorista">
                    <select name="" id="endPointComplaint" aria-placeholder="Filtrar por">
                        <option value="license">Placa</option>
                        <option value="">Nome/Placa</option>
                        <option value="city">Cidade</option>
                        <option value="district">Bairro</option>
                        <option value="state">Estado</option>
                    </select>
                    <a class="search__icon" onclick="getSearch()"> <i
                            class="fa-solid fa-magnifying-glass icon__mobile__search"></i></a>
                </span>
            </div>
            <div class="nav__desktop__top__items">
                <div class="mobile-bottom-nav__item mobile-bottom-nav__item--active">
                    <div class="mobile-bottom-nav__item-content links__desktop">
                        <i class="fa-solid fa-house icon__mobile link_active"></i>
                    </div>
                </div>
                <div class="mobile-bottom-nav__item">
                    <div class="mobile-bottom-nav__item-content links__desktop">
                        <a href="./perfil.html"><i class="fa-solid fa-user icon__mobile"></i></a>
                    </div>
                </div>

                <div class="nav__itens__links">
                    <div class="mobile-bottom-nav__item-content links__desktop">
                        <label for="modal-4">
                            <i class="fa-solid fa-bell icon__mobile"></i>
                        </label>
                    </div>
                </div>

                <div class="nav__itens__links">
                    <div class="mobile-bottom-nav__item-content">
                        <label for="modal-1">
                            <i class="fa-solid fa-caret-down icon__mobile js-open-modal"></i>
                        </label>
                    </div>
                </div>
                <div class="mobile-bottom-nav__item-content">
                    <div class="icon__user__initial">
                        <span class="initial__user" id="initial3"></span>
                    </div>
                </div>
            </div>
        </div>
        </div>
    </section>
    <!-- navbar mobile -->
    <section class="nav__mobile">
        <div class="nav__mobile__top">
            <div class="">
                <div class="mobile-bottom-nav__item-content">
                    <span id="logoMobile">
                        <img src=".//assets/img/logo-go-carbon.svg" alt="">
                    </span>
                </div>
            </div>

            <div class="mobile-bottom-nav__item mobile-bottom-nav__item">
                <div class="mobile-bottom-nav__item-content">
                    <h3>Feed</h3>
                </div>
            </div>

            <div class="">
                <div class="mobile-bottom-nav__item-content">
                    <label for="modal-4">
                        <i class="fa-solid fa-bell icon__mobile"></i>
                    </label>
                </div>
            </div>
        </div>
    </section>
    <!--------------------------------------------------------------------- /NAVBAR --------------------------------------------------------------------------->

    <!--------------------------------------------------------------------- CONTEUDO --------------------------------------------------------------------------->
    <main>
        <!-- card infos user -->
        <section class="content__feed">
            <div class="card__infos__user">
                <div class="flex padding__card">
                    <div class="icon__user icon__user__initial">
                        <span class="initial__user" id="initial1"></span>
                    </div>
                    <span>
                        <h4 id="nameUser"></h4>
                        <p id="city"></p>
                    </span>
                </div>
                <div class="hr"></div>
                <div class="padding__card">
                    <div class="flex justify">
                        <h5>Publicações</h5>
                        <span id="qntPublicacoes" class="data__user"></span>
                    </div>
                    <div class="flex justify top">
                        <h5>Buscas</h5>
                        <span id="data__bus" class="data__user">5</span>
                    </div>
                </div>
            </div>

            <!------------------------------------------CONTENT FEED ------------------------------>
            <div class="container__feed">
                <!-- card informações do usuario -->
                <div class="result__search flex">
                    <div class="icon__user icon__user__initial">
                        <span class="initial__user" id="initial2"></span>
                    </div>
                    <span class="flex new__publication">
                        <i class="fa-solid fa-pen-to-square"></i>
                        <p><a href="./new-publication.html">Escreva uma nova publicação</a></p>
                    </span>
                </div>

                <!-- tópico -->
                <div class="topic__feed flex justify">
                    <span class="flex">
                        <p>Casos Recentes:</p>
                        <p id="cityTopic"><b id="casosRecentes"></b></p>
                    </span>
                    <div class="hr"></div>
                </div>

                <div id="publicacoes"></div>

                <!------------------------------ /publicação  ----------------------------------------->


            </div>
            <!--------------------------------------------------------------------- / CONTENT FEED ---------------------------------------------------------->

            <!-- card tipos de denuncia -->
            <div class="card__infos__classifications">
                <div class="padding__card">
                    <h4>Classificação dos casos</h4>
                    <div class="colors__classifications">
                        <hr class="circle__assedio">
                        <hr class="circle__assedio__moral">
                        <hr class="circle__racism">
                        <hr class="circle__agressao__fisica">
                        <hr class="circle__agressao__verbal">
                        <hr class="circle__homofobia">
                        <hr class="circle__preconceito">
                        <hr class="circle__furto">
                    </div>

                    <div class="top__classification classification__complaint">
                        <div class="circle__assedio circle__classification"></div>
                        <h6>Assédio</h6>
                    </div>

                    <div class="top__classification classification__complaint">
                        <div class="circle__assedio__moral circle__classification"></div>
                        <h6>Assédio Moral</h6>
                    </div>

                    <div class="top__classification classification__complaint">
                        <div class="circle__racism circle__classification"></div>
                        <h6>Racismo</h6>
                    </div>

                    <div class="top__classification classification__complaint">
                        <div class="circle__agressao__fisica circle__classification"></div>
                        <h6>Agressão Física</h6>
                    </div>

                    <div class="top__classification classification__complaint">
                        <div class="circle__agressao__verbal circle__classification"></div>
                        <h6>Agressão Verbal</h6>
                    </div>

                    <div class="top__classification classification__complaint">
                        <div class="circle__homofobia circle__classification"></div>
                        <h6>Homofobia</h6>
                    </div>

                    <div class="top__classification classification__complaint">
                        <div class="circle__preconceito circle__classification"></div>
                        <h6>Preconceito</h6>
                    </div>

                    <div class="top classification__complaint">
                        <div class="circle__furto circle__classification"></div>
                        <h6>Furto</h6>
                    </div>

                    <label for="modal-5">
                        <span class="link__modal">Saiba mais</span>
                    </label>
                </div>

        </section>

        <div style="display: none;" class="toggle">
            <input type="checkbox" id="switch" name="theme" onclick="mudar_logo()">
            <label for="switch">Toggle</label>
        </div>
        <!---------------------------------------------------------------------- MODAIS -------------------------------------------------------------------------->

        <!-- modal navbar / mains opções de link -->
        <input class="modal-state" id="modal-1" type="checkbox" />
        <div class="modal">
            <label class="modal__bg" for="modal-1"></label>
            <div class="modal__inner">
                <a class="options__modal__user" href="./perfil-save.html">Casos salvos</a>
                <a class="options__modal__user" href="./perfil-contestation.html">Denuncias em analise</a>
                <a class="options__modal__user" href="./config-infos.html">Configurações</a>
                <div class="hr"></div>
                <span class="flex justify">
                    <a class="options__modal__user" href="#">Sair</a>
                    <i class="fa-solid fa-arrow-right-from-bracket"></i>
                </span>
            </div>
        </div>

        <!-- modal / notificações -->
        <input class="modal-state" id="modal-4" type="checkbox" />
        <div class="modal">
            <label class="modal__bg" for="modal-4"></label>
            <div class="modal__inner__notify padding__card">
                <div class="content__notify">
                    <h5>Seu caso foi removido</h5>
                    <span class="date">23/02/2022</span>
                    <p>Analizamos sua publicação mediante ao pedido feito pelo motorista denunciado e optamos por
                        exclui-la.</p>
                    <a href="#">Saiba Mais</a>
                    <div class="hr"></div>
                </div>

                <div class="content__notify">
                    <h5>Seu caso foi removido</h5>
                    <span class="date">23/02/2022</span>
                    <p>Analizamos sua publicação mediante ao pedido feito pelo motorista denunciado e optamos por
                        exclui-la.</p>
                    <a href="#">Saiba Mais</a>
                    <div class="hr"></div>
                </div>

                <div class="content__notify">
                    <h5>Seu caso foi removido</h5>
                    <span class="date">23/02/2022</span>
                    <p>Analizamos sua publicação mediante ao pedido feito pelo motorista denunciado e optamos por
                        exclui-la.</p>
                    <a href="#">Saiba Mais</a>
                    <div class="hr"></div>
                </div>

                <div class="content__notify">
                    <h5>Seu caso foi removido</h5>
                    <span class="date">23/02/2022</span>
                    <p>Analizamos sua publicação mediante ao pedido feito pelo motorista denunciado e optamos por
                        exclui-la.</p>
                    <a href="#">Saiba Mais</a>
                    <div class="hr"></div>
                </div>

                <div class="content__notify">
                    <h5>Seu caso foi removido</h5>
                    <span class="date">23/02/2022</span>
                    <p>Analizamos sua publicação mediante ao pedido feito pelo motorista denunciado e optamos por
                        exclui-la.</p>
                    <a href="#">Saiba Mais</a>
                    <div class="hr"></div>
                </div>
            </div>
        </div>

        <!-- modal classificação dos casos -->
        <input class="modal-state" id="modal-5" type="checkbox" />
        <div class="modal modal__classific">
            <label class="modal__bg__search" for="modal-5"></label>
            <div class="modal__inner__classific padding__card ">
                <h5>Classificação dos casos</h5>
                <p class="desc__cases__type">Aqui na GO as denúncias são classificadas, facilitando para que você faça a
                    sua denúncia e também
                    para que visualize de forma mais rápida o tipo de caso que está lendo.</p>
                <div class="card__more__class">
                    <div class="top__classification classification__complaint">
                        <div class="circle__assedio circle__classification"></div>
                        <h5>Assédio</h5>
                    </div>
                    <p class="desc__classfication">De acordo com a lei, o assédio é crime quando praticado por superior
                        hierárquico ou ascendente. Há duas interpretações em relação à prática do ato: o assédio pode
                        ocorrer pelo simples constrangimento da vítima ou pela prática contínua de atos constrangedores.
                    </p>
                    <div class="hr"></div>
                </div>

                <div class="card__more__class">
                    <div class="top__classification classification__complaint">
                        <div class="circle__assedio__moral circle__classification"></div>
                        <h5>Assédio Moral</h5>
                    </div>
                    <p class="desc__classfication">assédio moral é definido como “ofensa reiterada da dignidade de
                        alguém que cause danos ou sofrimento físico ou mental no exercício do emprego, cargo ou função”.
                    </p>
                    <div class="hr"></div>
                </div>

                <div class="card__more__class">
                    <div class="top__classification classification__complaint">
                        <div class="circle__racism circle__classification"></div>
                        <h5>Racismo</h5>
                    </div>
                    <p class="desc__classfication">Racismo é definido como “Praticar, induzir ou incitar a discriminação
                        ou preconceito de raça, cor, etnia, religião ou procedência nacional.”.
                    </p>
                    <div class="hr"></div>
                </div>

                <div class="card__more__class">
                    <div class="top__classification classification__complaint">
                        <div class="circle__agressao__fisica circle__classification"></div>
                        <h5>Agressão Fisica</h5>
                    </div>
                    <p class="desc__classfication">
                        É caracterizada como qualquer ação que ofenda a integridade e saúde do corpo da vítima. São
                        considerados atos de violência física: espancamentos, lesões causadas por objetos, empurrões,
                        beliscões, pontapés, ou qualquer outra forma de agressão.
                    </p>
                    <div class="hr"></div>
                </div>

                <div class="card__more__class">
                    <div class="top__classification classification__complaint">
                        <div class="circle__agressao__verbal circle__classification"></div>
                        <h5>Agressão Verbal</h5>
                    </div>
                    <p class="desc__classfication">
                        A violência verbal é um comportamento agressivo, caracterizado por palavras danosas, que têm a
                        intenção de ridicularizar, humilhar, manipular e/ou ameaçar.
                    </p>
                    <div class="hr"></div>
                </div>

                <div class="card__more__class">
                    <div class="top__classification classification__complaint">
                        <div class="circle__homofobia circle__classification"></div>
                        <h5>Homofobia</h5>
                    </div>
                    <p class="desc__classfication">
                        "praticar, induzir ou incitar a discriminação ou preconceito" em razão da orientação sexual da
                        pessoa pode ser considerado homofobia.
                    </p>
                    <div class="hr"></div>
                </div>

                <div class="card__more__class">
                    <div class="top__classification classification__complaint">
                        <div class="circle__preconceito circle__classification"></div>
                        <h5>Preconceito</h5>
                    </div>
                    <p class="desc__classfication">
                        Praticar, induzir ou incitar a discriminação ou preconceito de raça, cor, etnia, religião ou
                        procedência nacional. Pena: reclusão de um a três anos e multa.
                    </p>
                    <div class="hr"></div>
                </div>

                <div class="card__more__class">
                    <div class="top__classification classification__complaint">
                        <div class="circle__furto circle__classification"></div>
                        <h5>Furto</h5>
                    </div>
                    <p class="desc__classfication">
                        O crime de furto é descrito como subtração, ou seja, diminuição do patrimônio de outra pessoa,
                        sem que haja violência
                    </p>
                    <div class="hr"></div>
                </div>
            </div>
        </div>

        <!-- modal de busca -->
        <span class="display__modal">
            <input class="modal-state" id="modal-2" type="checkbox" />
            <div class="modal modal__search">
                <label class="modal__bg__search" for="modal-2"></label>
                <div class="modal__inner__search">
                    <div>
                        <p>Faça sua busca</p>
                        <span class="nav__mobile__input">
                            <input type="search" placeholder="Busque pela placa ou nome do motorista">
                            <select class="select__mobile" name="" id="" aria-placeholder="Filtrar por">
                                <option value="">Placa</option>
                                <option value="">Nome/Placa</option>
                                <option value="">Cidade</option>
                                <option value="">Bairro</option>
                                <option value="">Estado</option>
                            </select>
                            <a href="./search.html"
                                style="margin-top: 2px; padding-left: 10px; text-decoration: none; color: rgb(94, 94, 94);">
                                <i class="fa-solid fa-magnifying-glass icon__mobile__search"></i></a>
                        </span>
                    </div>
                </div>
            </div>
        </span>

    </main>

    <!----------------------------------------------------------------------- MENU -------------------------------------------------------------------------->
    <section class="nav__mobile">
        <nav class="mobile-bottom-nav">
            <div class="mobile-bottom-nav__item mobile-bottom-nav__item--active">
                <div class="mobile-bottom-nav__item-content">
                    <a href="./index.html"><i class="fa-solid fa-house icon__mobile"></i></a>
                </div>
            </div>
            <div class="nav__itens__links">
                <div class="mobile-bottom-nav__item-content">
                    <label for="modal-2">
                        <i class="fa-solid fa-magnifying-glass icon__mobile"></i>
                    </label>
                </div>
            </div>
            <div class="mobile-bottom-nav__item">
                <div class="mobile-bottom-nav__item-content">
                    <a href="./perfil.html"><i class="fa-solid fa-user icon__mobile"></i></a>
                </div>
            </div>

            <div class="nav__itens__links">
                <div class="mobile-bottom-nav__item-content">
                    <label for="modal-1">
                        <i class="fa-solid fa-angle-up icon__mobile"></i>
                    </label>
                </div>
            </div>
        </nav>
    </section>
    <script src="./assets/js/script-components.js"></script>
    <script src="./assets/js/dark-mode.js"></script>
</body>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<script>

    function getSearch(){
        let uriParam = document.getElementById('uriParamComplaint').value;
        let endPoint = document.getElementById('endPointComplaint').value;
        sessionStorage.setItem('uriParamComplaint', uriParam);
        sessionStorage.setItem('endPointComplaint', endPoint);
        window.open("./search.html");
    }

    function loadComplaints(){
        event.preventDefault();
        loadPage();
        axios.get(`http://localhost:8080/complaints/city`, {
            headers: {
                city: sessionStorage.getItem('user_city')
            }
        })
        .then((resp) => {
            console.log('FOI');
            document.getElementById('qntPublicacoes').innerHTML += `${resp.data.length}`;
            console.log(resp.data.length);
            resp.data.map(item => {
                console.log('ENTROU NO MAP, VAI VIR O JSON A BAIXO');
                console.log(item);
                var userData = JSON.stringify(item); 
                document.getElementById('publicacoes').innerHTML += `
                    <div class="content__complaint">
                        <div class="header__complaint flex justify">
                            <div class="flex">
                                <div class="icon__complaint icon__user icon__user__initial">
                                    <span class="initial__user" id="initialPublication">${item.user.name[0]}</span>
                                </div>
                                <span class="infos__user__complaint">
                                    <h4 id="nameUser">${item.user.name[0]}***************</h4>
                                    <p id="gender">${item.user.genre}</p>
                                </span>
                            </div>
                            <!-- colocar no (for="{id}"} para cada publi ter o seu modal -->
                            <label class="label__modal" for="${item.id}">
                                <i class="fa-solid fa-ellipsis-vertical"></i>
                            </label>
                            <!----------- modal funcionalidades ----------->
                            <!-- colocar no (id="{id}"} para cada publi ter o seu modal -->
                            <input class="modal-state" id="${item.id}" type="checkbox" />
                            <div class="modal__functions">
                                <!-- colocar no (for="{id}"} para cada publi ter o seu modal -->
                                <label class="" for="${item.id}"></label>
                                <div class="modal__inner__func">
                                    <form action="">
                                        <p style="cursor: pointer;" class="options__modal__user" onclick='save(${item.id})'><input
                                                style="display: none; cursor: pointer;" type="submit"
                                                class="option__modal__user" value="idCaso">Salvar</p>
                                        <a href="./contest.html">
                                            <p style="cursor: pointer;" class="options__modal__user"><input
                                                    style="display: none; cursor: pointer;" type="submit"
                                                    class="option__modal__user" value="idCaso">Denunciar</p>
                                        </a>
                                    </form>
                                </div>
                            </div>
                        </div>

                        <span class="check__complaint">
                            <h6>Possui boletim de ocorrencia</h6>
                            <i class="fa-solid fa-certificate"></i>
                        </span>
                        <div class="infos__complaint">
                            <p id="textComplaint">
                                ${item.description}
                            </p>
                        </div>

                        <div class="photos__complaint">
                            <div class="item shrink-1-basis">
                                <img src="./assets/img/print-uber.png" alt="">
                            </div>
                            <div class="item shrink-1-basis">
                                <img src="./assets/img/photo-uber.png" alt="">
                            </div>
                        </div>

                        <div class="more__infos__complaint flex justify">
                            <div class="classification__complaint">
                                <div class="circle__assedio circle__classification"></div>
                                <h6>Classificação do caso: <span id="classificationPub">Assédio</span></h6>
                            </div>
                            <span class="location__conplaint" id="locationComplaint">
                                ${item.address.district} - ${item.address.city} | ${item.dateTimeComplaint}
                            </span>
                        </div>
                        <div class="hr margin-bottom"></div>
                    </div>
                `;
            })
        })
    }
    
    function loadPage(){
        document.getElementById('casosRecentes').innerHTML += sessionStorage.getItem('user_city');
        document.getElementById('nameUser').innerHTML += sessionStorage.user_nome;
        document.getElementById('initial1').innerHTML += sessionStorage.user_nome.substr(0, 1);
        document.getElementById('initial2').innerHTML += sessionStorage.user_nome.substr(0, 1);
        document.getElementById('initial3').innerHTML += sessionStorage.user_nome.substr(0, 1);
        document.getElementById('city').innerHTML += `${sessionStorage.user_city}`;
        document.getElementsByClassName("icon__user__initial")[0].style.backgroundColor = sessionStorage.user_colorProfile;
            document.getElementsByClassName("icon__user__initial")[1].style.backgroundColor = sessionStorage.user_colorProfile;
            document.getElementsByClassName("icon__user__initial")[2].style.backgroundColor = sessionStorage.user_colorProfile;
    }

    function save(id) {

        event.preventDefault();
        data = {
            userId: sessionStorage.user_id,
            complaintId: id
        }
        axios.post(`http://localhost:8080/complaints-saved`, data)
            .then((resp) => {
                console.log('FUNCIONOU');
                alert("salvo");
            })
            .catch((err) => {
                alert('ERROR');
            })

    }

</script>
</html>