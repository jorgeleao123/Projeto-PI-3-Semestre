<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="assets/img/logo-go-blue.svg" type="image/png">
    <script src="https://kit.fontawesome.com/c9f71e3f63.js" crossorigin="anonymous"></script>
    <title>Erro | GO</title>

    <link rel="stylesheet" href="./assets/css/style.modais.css">
    <link rel="stylesheet" href="./assets/css/style.nav.css">
    <link rel="stylesheet" href="./assets/css/feed.css">
    <link rel="stylesheet" href="./assets/css/style-components.css">
    <link rel="stylesheet" href="./assets/css/search.css">
    <link rel="stylesheet" href="./assets/css/publication.css">
    <link rel="stylesheet" href="./assets/css/error.css">
</head>

<body onload="notificacao()">
    <!------------------------------------------------------------------------- NAVBAR ------------------------------------------------------------------------->
    <!-- navbar desktop -->
    <section class="nav__desktop">
        <div class="nav__desktop__top">
            <div class="nav__desktop__top__items">
                <span id="logo">
                    <img src="../assets/img/logo-go-carbon.svg" alt="">
                </span>
                <span class="nav__desktop__search">
                    <input type="search" id="uriParamComplaint" placeholder="Busque pela placa ou nome do motorista">
                    <select name="" id="endPointComplaint" aria-placeholder="Filtrar por">
                        <option value="license">Placa</option>
                        <option value="city">Cidade</option>
                        <option value="district">Bairro</option>
                        <option value="state">Estado</option>
                    </select>
                    <a onclick="getSearch()" class="search__icon"> <i
                            class="fa-solid fa-magnifying-glass icon__mobile__search"></i></a>
                </span>
            </div>
            <div class="nav__desktop__top__items">
                <div class="mobile-bottom-nav__item mobile-bottom-nav__item">
                    <div class="mobile-bottom-nav__item-content links__desktop">
                        <a href="./index.html"><i class="fa-solid fa-house icon__mobile"></i></a>
                    </div>
                </div>
                <div class="mobile-bottom-nav__item">
                    <div class="mobile-bottom-nav__item-content links__desktop">
                        <a href="./perfil.html"><i class="fa-solid fa-user icon__mobile"></i></a>
                    </div>
                </div>

                <div class="nav__itens__links">
                    <div class="mobile-bottom-nav__item-content links__desktop">
                        <label for="modal-4">
                            <i class="fa-solid fa-bell icon__mobile"></i>
                        </label>
                    </div>
                </div>

                <div class="nav__itens__links">
                    <div class="mobile-bottom-nav__item-content">
                        <label for="modal-1">
                            <i class="fa-solid fa-caret-down icon__mobile js-open-modal"></i>
                        </label>
                    </div>
                </div>
                <div class="mobile-bottom-nav__item-content">
                    <div class="icon__user__initial">
                        <span class="initial__user" id="initial1"></span>
                    </div>
                </div>
            </div>
        </div>
        </div>
    </section>
    <!-- navbar mobile -->
    <section class="nav__mobile">
        <div class="nav__mobile__top">
            <div class="">
                <div class="mobile-bottom-nav__item-content">
                    <span id="logoMobile">
                        <img src=".//assets/img/logo-go-carbon.svg" alt="">
                    </span>
                </div>
            </div>

            <div class="mobile-bottom-nav__item mobile-bottom-nav__item">
                <div class="mobile-bottom-nav__item-content">
                    <h3>Error</h3>
                </div>
            </div>

            <div class="">
                <div class="mobile-bottom-nav__item-content">
                    <label for="modal-4">
                        <i class="fa-solid fa-bell icon__mobile"></i>
                    </label>
                </div>
            </div>
        </div>
    </section>
    <!--------------------------------------------------------------------- /NAVBAR --------------------------------------------------------------------------->

    <!--------------------------------------------------------------------- CONTEUDO --------------------------------------------------------------------------->
    <section class="container__farol">
        <div class="container__farol">
            <div class="farol__collum"></div>
            <div class="farol__numbers">
                <div class="circle__green">4</div>
                <div class="circle__yellow">0</div>
                <div class="circle__red">4</div>
            </div>
        </div>

        <div class="desc__error">
            <h4>Não foi possivel encontar a página.</h4>
            <p>Nos desculpe, infelizmente nós não encontramos a página que você queria :(</p>
            <p>{nome}</p>
            <a class="link__modal" href="./index.html">Voltar para a página inicial</a>
        </div>

        <div class="container__building building__one">
            <div class="flex justify">
                <div class="window"></div>
                <div class="lit window"></div>
            </div>

            <div class="flex justify">
                <div class="lit window"></div>
                <div class="lit window"></div>
            </div>

            <div class="flex justify">
                <div class="window"></div>
                <div class="window"></div>
            </div>

            <div class="flex justify">
                <div class="lit window"></div>
                <div class="lit window"></div>
            </div>

            <div class="flex justify">
                <div class="window"></div>
                <div class="window"></div>
            </div>
        </div>

        <div class="container__building building__two">
            <div class="flex justify">
                <div class="window"></div>
                <div class="lit window"></div>
            </div>

            <div class="flex justify">
                <div class="lit window"></div>
                <div class="window"></div>
            </div>

            <div class="flex justify">
                <div class="window"></div>
                <div class="window"></div>
            </div>
        </div>
    </section>
    <div style="display: none;" class="toggle">
        <input type="checkbox" id="switch" name="theme" onclick="mudar_logo()">
        <label for="switch">Toggle</label>
    </div>

    <!---------------------------------------------------------------------- MODAIS -------------------------------------------------------------------------->

    <!-- modal navbar / mains opções de link -->
    <input class="modal-state" id="modal-1" type="checkbox" />
    <div class="modal">
        <label class="modal__bg" for="modal-1"></label>
        <div class="modal__inner">
            <a class="options__modal__user" href="./perfil-save.html">Casos salvos</a>
            <a class="options__modal__user" href="./perfil-contestation.html">Denuncias em analise</a>
            <a class="options__modal__user" href="./config-infos.html">Configurações</a>
            <hr>
            <span class="flex justify">
                <a class="options__modal__user" href="#">Sair</a>
                <i class="fa-solid fa-arrow-right-from-bracket"></i>
            </span>
        </div>
    </div>

    <!-- modal / notificações -->
    <input class="modal-state" id="modal-4" type="checkbox" />
    <div class="modal">
        <label class="modal__bg" for="modal-4"></label>
        <div class="modal__inner__notify padding__card" id="idNotificacao"></div>
    </div>

    <!-- modal de busca -->
    <span class="display__modal">
        <input class="modal-state" id="modal-2" type="checkbox" />
        <div class="modal modal__search">
            <label class="modal__bg__search" for="modal-2"></label>
            <div class="modal__inner__search">
                <div>
                    <p>Faça sua busca</p>
                    <span class="nav__mobile__input">
                        <input type="search" placeholder="Busque pela placa ou nome do motorista">
                        <select class="select__mobile" name="" id="" aria-placeholder="Filtrar por">
                            <option value="">Placa</option>
                            <option value="">Nome/Placa</option>
                            <option value="">Cidade</option>
                            <option value="">Bairro</option>
                            <option value="">Estado</option>
                        </select>
                        <a href="./search.html"
                            style="margin-top: 2px; padding-left: 10px; text-decoration: none; color: rgb(94, 94, 94);">
                            <i class="fa-solid fa-magnifying-glass icon__mobile__search"></i></a>
                    </span>
                </div>
            </div>
        </div>
    </span>

    <!----------------------------------------------------------------------- MENU -------------------------------------------------------------------------->
    <section class="nav__mobile">
        <nav class="mobile-bottom-nav">
            <div class="mobile-bottom-nav__item">
                <div class="mobile-bottom-nav__item-content">
                    <a href="./index.html"><i class="fa-solid fa-house icon__mobile"></i></a>
                </div>
            </div>
            <div class="nav__itens__links ">
                <div class="mobile-bottom-nav__item-content ">
                    <label for="modal-2">
                        <i class="fa-solid fa-magnifying-glass icon__mobile"></i>
                    </label>
                </div>
            </div>
            <div class="mobile-bottom-nav__item">
                <div class="mobile-bottom-nav__item-content">
                    <a href="./perfil.html"><i class="fa-solid fa-user icon__mobile"></i></a>
                </div>
            </div>

            <div class="nav__itens__links">
                <div class="mobile-bottom-nav__item-content">
                    <label for="modal-1">
                        <i class="fa-solid fa-angle-up icon__mobile"></i>
                    </label>
                </div>
            </div>
        </nav>
    </section>
    <script src="./assets/js/script-components.js"></script>
    <script src="./assets/js/dark-mode.js"></script>

    <script>
        function notificacao() {
        event.preventDefault();

        var config = {
            method: 'get',
            url: `http://localhost:8080/notifications/user/${sessionStorage.getItem('user_id')}`,
        };

        axios(config)
            .then(function (response) {
                idNotificacao.innerHTML += `<a onclick="zeraNotificacao()">Marca como visto</a>`;
                response.data.map((e) => {
                   if(!e["hasViewed"]){
                    idNotificacao.innerHTML += `<div class="content__notify">
                    <h5>${e["title"]}</h5>
                    <span class="date">${e["dateTimeNotification"]}</span>
                    <p>${e["description"]}</p>
                    <div class="hr"></div>
                </div>`;
                   }
                })
                
            })
            .catch(function (error) {
                console.log(error);
            });
            
    }

    function zeraNotificacao() {
        event.preventDefault();

        var config = {
            method: 'patch',
            url: `http://localhost:8080/notifications/view/${sessionStorage.getItem('user_id')}`,
        };

        axios(config)
            .then(function (response) {
               console.log(JSON.stringify(response.data));
               console.log("foi");
               window.location.href = "./error.html";
            })
            .catch(function (error) {
                console.log(error);
            });
    }
    </script>
</body>
<script>
function getSearch(){
    let uriParam = document.getElementById('uriParamComplaint').value;
    let endPoint = document.getElementById('endPointComplaint').value;
    document.getElementById('initial1').innerHTML += sessionStorage.user_nome[0];
    sessionStorage.setItem('uriParamComplaint', uriParam);
    sessionStorage.setItem('endPointComplaint', endPoint);
    window.location.href = "./search.html";
}
</script>

</html>